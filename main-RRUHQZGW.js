import{$ as Se,A as c,B as i,Ba as Ue,C as t,D as v,E as _,F as u,G as s,H as $,I as Z,J as me,K as a,L as x,M as h,N as E,O as w,P as S,Q as M,R as G,S as pe,T as ge,U as ue,V as q,W as Ee,X as N,Y as we,Z as k,_ as A,a as xe,aa as I,b as fe,ba as Me,c as W,ca as P,d as ve,da as Ie,e as he,ea as Pe,f as _e,fa as J,g as D,ga as K,h as z,ha as Te,i as T,ia as Ve,j as p,ja as ke,k as g,ka as Fe,l as C,la as O,m as V,ma as Q,n as be,na as De,o as L,p as Ce,pa as Ne,q as o,qa as Ae,r as b,ra as Oe,s as y,sa as Le,t as f,ta as je,u as de,v as U,w as B,wa as He,x as ye,xa as Re,y as ce,ya as We,z as se,za as ze}from"./chunk-CXDBP5RA.js";var Qe=(n,r)=>r.path;function Xe(n,r){n&1&&v(0,"div",29)}function Ye(n,r){if(n&1){let e=_();U(0,Xe,1,0,"div",29),i(1,"button",30),u("click",function(){let l=p(e).$implicit,m=s(2);return g(m.handleMenuItem(l))}),i(2,"span",31),C(),i(3,"svg",32),v(4,"path"),t()(),a(5),t()}if(n&2){let e=r.$implicit;B(e.dividerAbove?0:-1),o(),me("text-red-600",e.danger)("hover:bg-red-50",e.danger),c("routerLink",e.route),o(3),de("d",e.icon),o(),h(" ",e.label," ")}}function et(n,r){if(n&1&&(i(0,"div",17)(1,"div",26)(2,"span",27),a(3,"JD"),t(),i(4,"div")(5,"div",28),a(6,"Miguel Moreno"),t(),i(7,"div",14),a(8,"Administrador"),t()()(),v(9,"div",29),ce(10,Ye,6,8,null,null,ye),t()),n&2){let e=s();o(10),se(e.userMenuItems)}}function tt(n,r){if(n&1){let e=_();i(0,"a",33),u("click",function(){p(e);let l=s();return g(l.closeSidebar())}),i(1,"span",34),C(),i(2,"svg",35),v(3,"path"),t()(),a(4),t()}if(n&2){let e=r.$implicit;c("routerLink",e.path),o(3),de("d",e.icon),o(),h(" ",e.label," ")}}function it(n,r){if(n&1){let e=_();i(0,"div",36),u("click",function(){p(e);let l=s();return g(l.closeSidebar())}),t()}}var X=class n{constructor(r,e){this.router=r;this.authService=e}sidebarOpen=L(!1);userMenuOpen=L(!1);navItems=L([{label:"Dashboard",path:"/dashboard",icon:"M3 12l2-2 4 4L21 4l2 2L9 20 3 14z"},{label:"Citas",path:"/citas",icon:"M6 2a1 1 0 0 0-1 1v1H4a2 2 0 0 0-2 2v2h20V6a2 2 0 0 0-2-2h-1V3a1 1 0 0 0-1-1H6Zm14 7H2v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9Zm-7 3v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0v-2h-2a1 1 0 1 1 0-2h2v-2a1 1 0 1 1 2 0Z"},{label:"Pacientes",path:"/pacientes",icon:"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"},{label:"Especialidades",path:"/especialidades",icon:"M4 22h16V8h-3V4H7v4H4v14Zm5-10h6v6h-6v-6Zm-2 10v-8h10v8H7Zm2-12h6V6H9v4Z"},{label:"Medicos",path:"/medicos",icon:"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm-7 9v-1c0-2.76 3.58-5 8-5s8 2.24 8 5v1H5Zm13-11h-2V8a1 1 0 1 0-2 0v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2Z"}]);userMenuItems=[{label:"Ver Perfil",icon:"M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5.33 0-8 2.67-8 6v2h16v-2c0-3.33-2.67-6-8-6Z",route:"/profile"},{label:"Configuraci\xF3n",icon:"M12 8a4 4 0 1 0 4 4 4 4 0 0 0-4-4Z",route:"/settings",dividerAbove:!0},{label:"Cerrar Sesi\xF3n",icon:"M16 13H7v-2h9V8l5 4-5 4v-3Z",danger:!0,dividerAbove:!0,action:()=>this.logout()}];toggleSidebar(){this.sidebarOpen.update(r=>!r)}closeSidebar(){this.sidebarOpen.set(!1)}toggleUserMenu(){this.userMenuOpen.update(r=>!r)}closeUserMenu(){this.userMenuOpen.set(!1)}handleMenuItem(r){r.action&&r.action(),this.closeUserMenu()}logout(){this.authService.signOut()?(console.log("Sesi\xF3n cerrada exitosamente"),this.router.navigate(["/auth/login"])):console.error("Error al cerrar sesi\xF3n")}onDocClick(r){r.target.closest(".relative")||this.closeUserMenu()}static \u0275fac=function(e){return new(e||n)(b(K),b(Q))};static \u0275cmp=y({type:n,selectors:[["app-main-layout"]],hostBindings:function(e,d){e&1&&u("click",function(m){return d.onDocClick(m)},Ce)},decls:32,vars:6,consts:[[1,"min-h-dvh","bg-gray-50","text-gray-900"],[1,"sticky","top-0","z-40","bg-white/90","backdrop-blur","border-b","shadow-sm"],[1,"mx-auto","w-full","max-w-7xl","px-3","md:px-6","lg:px-8"],[1,"flex","h-16","items-center","gap-2"],[1,"flex","items-center","gap-2"],[1,"inline-flex","h-9","w-9","items-center","justify-center","rounded-lg","border","bg-white","hover:bg-gray-100","transition","md:hidden",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-width","2","d","M4 7h16M4 12h16M4 17h16"],["routerLink","/",1,"text-base","font-semibold","text-teal-900","hover:text-teal-700","transition"],[1,"ml-auto","relative"],[1,"flex","items-center","gap-2","rounded-lg","px-2","py-1","hover:bg-gray-100","transition",3,"click"],[1,"h-8","w-8","rounded-full","bg-teal-700","text-white","text-sm","flex","items-center","justify-center"],[1,"hidden","sm:block","text-left"],[1,"text-sm","font-medium","text-teal-900"],[1,"text-xs","text-teal-700"],["fill","currentColor",1,"h-4","w-4","text-teal-700"],["d","M7 10l5 5 5-5z"],[1,"absolute","right-0","mt-2","w-64","rounded-xl","border","bg-white","shadow-lg"],[1,"flex"],[1,"fixed","inset-y-0","left-0","z-40","w-64","bg-white","border-r","shadow-md","transition-transform","md:static","md:translate-x-0"],[1,"flex","flex-col","gap-2","p-3"],["routerLinkActive","bg-teal-700 text-white",1,"flex","items-center","gap-3","rounded-xl","px-3","py-2","text-sm","hover:bg-teal-100","transition",3,"routerLink"],[1,"fixed","inset-0","z-30","bg-black/20","md:hidden"],[1,"flex-1","min-h-[calc(100dvh-64px)]","bg-gray-50"],[1,"md:border-l"],[1,"max-w-7xl","mx-auto","px-4","pb-10"],[1,"flex","items-center","gap-3","px-4","py-3"],[1,"h-9","w-9","rounded-full","bg-teal-700","text-white","text-sm","flex","items-center","justify-center"],[1,"text-sm","font-semibold","text-teal-900"],[1,"h-px","bg-gray-100"],[1,"flex","w-full","items-center","gap-3","px-4","py-2.5","text-sm","hover:bg-gray-50","transition",3,"click","routerLink"],[1,"h-8","w-8","rounded-lg","border","bg-white","flex","items-center","justify-center"],["viewBox","0 0 24 24","fill","currentColor",1,"h-4","w-4"],["routerLinkActive","bg-teal-700 text-white",1,"flex","items-center","gap-3","rounded-xl","px-3","py-2","text-sm","hover:bg-teal-100","transition",3,"click","routerLink"],[1,"h-9","w-9","rounded-lg","bg-teal-50","flex","items-center","justify-center","group-[.router-link-active]:bg-teal-700"],["viewBox","0 0 24 24","fill","currentColor",1,"h-5","w-5","text-teal-700","group-[.router-link-active]:text-white"],[1,"fixed","inset-0","z-30","bg-black/20","md:hidden",3,"click"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),u("click",function(){return d.toggleSidebar()}),C(),i(6,"svg",6),v(7,"path",7),t()(),V(),i(8,"a",8),a(9,"Sistema de Citas"),t()(),i(10,"div",9)(11,"button",10),u("click",function(){return d.toggleUserMenu()}),i(12,"span",11),a(13,"JD"),t(),i(14,"div",12)(15,"div",13),a(16,"Miguel Moreno"),t(),i(17,"div",14),a(18,"Administrador"),t()(),C(),i(19,"svg",15),v(20,"path",16),t()(),U(21,et,12,0,"div",17),t()()()(),V(),i(22,"div",18)(23,"aside",19)(24,"nav",20),ce(25,tt,5,3,"a",21,Qe),t()(),U(27,it,1,0,"div",22),i(28,"main",23)(29,"div",24)(30,"div",25),v(31,"router-outlet"),t()()()()()),e&2&&(o(21),B(d.userMenuOpen()?21:-1),o(2),me("-translate-x-full",!d.sidebarOpen())("translate-x-0",d.sidebarOpen()),o(2),se(d.navItems()),o(2),B(d.sidebarOpen()?27:-1))},dependencies:[I,Fe,J,Te,Ve],encapsulation:2})};var nt=()=>[5,8,12,7,10,15,9],at=()=>[3,5,7,6,4,8,5],rt=()=>[1,2,1,3,2,1,2];function ot(n,r){if(n&1&&v(0,"div",26),n&2){let e=r.$implicit;Z("height",e*5,"%")}}function lt(n,r){if(n&1&&v(0,"div",27),n&2){let e=r.$implicit;Z("height",e*10,"%")}}function dt(n,r){if(n&1&&v(0,"div",28),n&2){let e=r.$implicit;Z("height",e*20,"%")}}var Y=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-dashboard"]],decls:47,vars:6,consts:[[1,"space-y-8","p-6","bg-gray-50","min-h-screen"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-2"],[1,"text-3xl","font-extrabold","text-teal-900"],[1,"text-teal-700"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"p-6","rounded-2xl","bg-gradient-to-r","from-teal-400","to-teal-300","text-white","shadow-md","transform","transition","hover:scale-105","cursor-pointer"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium"],["fill","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-white","opacity-80"],["d","M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4 0-7 2-7 4v2h14v-2c0-2-3-4-7-4Z"],[1,"mt-3","text-3xl","font-bold"],[1,"p-6","rounded-2xl","bg-gradient-to-r","from-cyan-400","to-cyan-300","text-white","shadow-md","transform","transition","hover:scale-105","cursor-pointer"],["d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"],[1,"p-6","rounded-2xl","bg-gradient-to-r","from-lime-400","to-lime-300","text-white","shadow-md","transform","transition","hover:scale-105","cursor-pointer"],["d","M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm-7 9v-1c0-2.76 3.58-5 8-5s8 2.24 8 5v1H5Zm13-11h-2V8a1 1 0 1 0-2 0v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2Z"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","mt-6"],[1,"p-6","bg-white","rounded-2xl","shadow-sm"],[1,"text-teal-900","font-semibold","mb-3"],[1,"h-40","bg-teal-50","rounded-lg","flex","items-end","gap-1","p-2"],["class","bg-teal-400 w-6 rounded-t-lg",3,"height",4,"ngFor","ngForOf"],[1,"text-cyan-900","font-semibold","mb-3"],[1,"h-40","bg-cyan-50","rounded-lg","flex","items-end","gap-1","p-2"],["class","bg-cyan-400 w-6 rounded-t-lg",3,"height",4,"ngFor","ngForOf"],[1,"text-lime-900","font-semibold","mb-3"],[1,"h-40","bg-lime-50","rounded-lg","flex","items-end","gap-1","p-2"],["class","bg-lime-400 w-6 rounded-t-lg",3,"height",4,"ngFor","ngForOf"],[1,"bg-teal-400","w-6","rounded-t-lg"],[1,"bg-cyan-400","w-6","rounded-t-lg"],[1,"bg-lime-400","w-6","rounded-t-lg"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"Dashboard Cl\xEDnica"),t(),i(4,"p",3),a(5,"Bienvenido al sistema de Clinica de Vida"),t()(),i(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),a(10,"Pacientes Hoy"),t(),C(),i(11,"svg",8),v(12,"path",9),t()(),V(),i(13,"div",10),a(14,"123"),t()(),i(15,"div",11)(16,"div",6)(17,"div",7),a(18,"Citas Pr\xF3ximas"),t(),C(),i(19,"svg",8),v(20,"path",12),t()(),V(),i(21,"div",10),a(22,"45"),t()(),i(23,"div",13)(24,"div",6)(25,"div",7),a(26,"Doctores Disponibles"),t(),C(),i(27,"svg",8),v(28,"path",14),t()(),V(),i(29,"div",10),a(30,"12"),t()()(),i(31,"div",15)(32,"div",16)(33,"h3",17),a(34,"Pacientes por Mes"),t(),i(35,"div",18),f(36,ot,1,2,"div",19),t()(),i(37,"div",16)(38,"h3",20),a(39,"Citas Semanales"),t(),i(40,"div",21),f(41,lt,1,2,"div",22),t()(),i(42,"div",16)(43,"h3",23),a(44,"Doctores Activos"),t(),i(45,"div",24),f(46,dt,1,2,"div",25),t()()()()),e&2&&(o(36),c("ngForOf",G(3,nt)),o(5),c("ngForOf",G(4,at)),o(5),c("ngForOf",G(5,rt)))},dependencies:[I,k],encapsulation:2})};var Be=(n,r)=>{let e=T(K),d=T(Q);return r.url.includes("/login")?W(!0):d.check().pipe(_e(l=>{if(!l){let m=e.parseUrl("/auth/login");return W(m)}return W(!0)}),he(l=>{console.error("Authentication check failed",l);let m=e.parseUrl("/auth/login");return W(m)}))};var te=class n{_httpClient=T(P);baseUrl=O.apiUrl;getCitas(r=0,e=5){return this._httpClient.get(`${this.baseUrl}/api/citas?page=${r}&size=${e}`)}crearCita(r){return this._httpClient.post(`${this.baseUrl}/api/citas`,r)}actualizarCita(r,e){return this._httpClient.put(`${this.baseUrl}/api/citas/${r}`,e)}eliminarCita(r){return this._httpClient.delete(`${this.baseUrl}/api/citas/${r}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var H=class n{_httpClient=T(P);baseUrl=O.apiUrl;getPacientes(r=0,e=1e3){return this._httpClient.get(`${this.baseUrl}/api/pacientes?page=${r}&size=${e}`)}getPacienteById(r){return this._httpClient.get(`${this.baseUrl}/api/pacientes${r}`)}createPaciente(r){return this._httpClient.post(this.baseUrl,r)}updatePaciente(r,e){return this._httpClient.put(`${this.baseUrl}/${r}`,e)}deletePaciente(r){return this._httpClient.delete(`${this.baseUrl}/${r}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var R=class n{constructor(r){this.http=r}_httpClient=T(P);baseUrl=O.apiUrl;getMedicos(r=0,e=1e3){return this._httpClient.get(`${this.baseUrl}/api/medicos?page=${r}&size=${e}`)}static \u0275fac=function(e){return new(e||n)(z(P))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ge=(n,r,e)=>({"bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs font-semibold":n,"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-semibold":r,"bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-semibold":e});function mt(n,r){if(n&1&&(i(0,"option",28),a(1),t()),n&2){let e=r.$implicit;c("value",e.id),o(),E("",e.nombres," ",e.apellidos)}}function pt(n,r){if(n&1&&(i(0,"option",28),a(1),t()),n&2){let e=r.$implicit;c("value",e.id),o(),E("",e.nombres," ",e.apellidos)}}function gt(n,r){if(n&1){let e=_();i(0,"div",13)(1,"div",14)(2,"h3",15),a(3,"Nueva Cita M\xE9dica"),t(),i(4,"form",16),u("ngSubmit",function(){p(e);let l=s();return g(l.guardarCita())}),i(5,"label",17),a(6,"Paciente:"),t(),i(7,"select",18),M("ngModelChange",function(l){p(e);let m=s();return S(m.cita.pacienteId,l)||(m.cita.pacienteId=l),g(l)}),i(8,"option",19),a(9,"Seleccionar paciente..."),t(),f(10,mt,2,3,"option",20),t(),i(11,"label",17),a(12,"M\xE9dico:"),t(),i(13,"select",21),M("ngModelChange",function(l){p(e);let m=s();return S(m.cita.medicoId,l)||(m.cita.medicoId=l),g(l)}),i(14,"option",19),a(15,"Seleccionar m\xE9dico..."),t(),f(16,pt,2,3,"option",20),t(),i(17,"label",17),a(18,"Fecha:"),t(),i(19,"input",22),M("ngModelChange",function(l){p(e);let m=s();return S(m.cita.fecha,l)||(m.cita.fecha=l),g(l)}),t(),i(20,"label",17),a(21,"Hora:"),t(),i(22,"input",23),M("ngModelChange",function(l){p(e);let m=s();return S(m.cita.hora,l)||(m.cita.hora=l),g(l)}),t(),i(23,"label",17),a(24,"Motivo:"),t(),i(25,"input",24),M("ngModelChange",function(l){p(e);let m=s();return S(m.cita.motivo,l)||(m.cita.motivo=l),g(l)}),t(),i(26,"div",25)(27,"button",26),u("click",function(){p(e);let l=s();return g(l.cerrarFormularioCita())}),a(28,"Cancelar"),t(),i(29,"button",27),a(30,"Guardar"),t()()()()()}if(n&2){let e=s();o(7),w("ngModel",e.cita.pacienteId),o(3),c("ngForOf",e.pacientes),o(3),w("ngModel",e.cita.medicoId),o(3),c("ngForOf",e.medicos),o(3),w("ngModel",e.cita.fecha),o(3),w("ngModel",e.cita.hora),o(3),w("ngModel",e.cita.motivo)}}function ut(n,r){if(n&1&&(i(0,"option",28),a(1),t()),n&2){let e=r.$implicit;c("value",e.id),o(),E("",e.nombres," ",e.apellidos)}}function xt(n,r){if(n&1&&(i(0,"option",28),a(1),t()),n&2){let e=r.$implicit;c("value",e.id),o(),E("",e.nombres," ",e.apellidos)}}function ft(n,r){if(n&1){let e=_();i(0,"div",13)(1,"div",14)(2,"h3",15),a(3,"\u270F\uFE0F Editar Cita M\xE9dica"),t(),i(4,"form",16),u("ngSubmit",function(){p(e);let l=s();return g(l.guardarEdicion())}),i(5,"label",17),a(6,"Paciente:"),t(),i(7,"select",29),M("ngModelChange",function(l){p(e);let m=s();return S(m.editingCita.idPaciente,l)||(m.editingCita.idPaciente=l),g(l)}),i(8,"option",19),a(9,"Seleccionar paciente..."),t(),f(10,ut,2,3,"option",20),t(),i(11,"label",17),a(12,"M\xE9dico:"),t(),i(13,"select",30),M("ngModelChange",function(l){p(e);let m=s();return S(m.editingCita.idMedico,l)||(m.editingCita.idMedico=l),g(l)}),i(14,"option",19),a(15,"Seleccionar m\xE9dico..."),t(),f(16,xt,2,3,"option",20),t(),i(17,"label",17),a(18,"Fecha:"),t(),i(19,"input",22),M("ngModelChange",function(l){p(e);let m=s();return S(m.editingCita.fecha,l)||(m.editingCita.fecha=l),g(l)}),t(),i(20,"label",17),a(21,"Hora:"),t(),i(22,"input",23),M("ngModelChange",function(l){p(e);let m=s();return S(m.editingCita.hora,l)||(m.editingCita.hora=l),g(l)}),t(),i(23,"label",17),a(24,"Motivo:"),t(),i(25,"input",24),M("ngModelChange",function(l){p(e);let m=s();return S(m.editingCita.motivo,l)||(m.editingCita.motivo=l),g(l)}),t(),i(26,"label",17),a(27,"Estado:"),t(),i(28,"select",31),M("ngModelChange",function(l){p(e);let m=s();return S(m.editingCita.estado,l)||(m.editingCita.estado=l),g(l)}),i(29,"option",32),a(30,"PENDIENTE"),t(),i(31,"option",33),a(32,"CONFIRMADA"),t(),i(33,"option",34),a(34,"CANCELADA"),t()(),i(35,"div",25)(36,"button",26),u("click",function(){p(e);let l=s();return g(l.cancelarEdicion())}),a(37,"Cancelar"),t(),i(38,"button",35),a(39,"Actualizar"),t()()()()()}if(n&2){let e=s();o(7),w("ngModel",e.editingCita.idPaciente),o(3),c("ngForOf",e.pacientes),o(3),w("ngModel",e.editingCita.idMedico),o(3),c("ngForOf",e.medicos),o(3),w("ngModel",e.editingCita.fecha),o(3),w("ngModel",e.editingCita.hora),o(3),w("ngModel",e.editingCita.motivo),o(3),w("ngModel",e.editingCita.estado)}}function vt(n,r){if(n&1){let e=_();i(0,"div",13)(1,"div",36)(2,"h3",37),a(3,"\u{1F5D1}\uFE0F Eliminar Cita"),t(),i(4,"p",38),a(5," \xBFEst\xE1s seguro de que deseas eliminar la cita de "),i(6,"strong"),a(7),t(),a(8," programada para el "),i(9,"strong"),a(10),t(),a(11," a las "),i(12,"strong"),a(13),t(),a(14,"? "),t(),i(15,"p",39),a(16,"Esta acci\xF3n no se puede deshacer."),t(),i(17,"div",40)(18,"button",26),u("click",function(){p(e);let l=s();return g(l.cancelarEliminacion())}),a(19," Cancelar "),t(),i(20,"button",41),u("click",function(){p(e);let l=s();return g(l.confirmarEliminacion())}),a(21," S\xED, Eliminar "),t()()()()}if(n&2){let e=s();o(7),x(e.citaAEliminar.pacienteNombreCompleto),o(3),x(e.citaAEliminar.fecha),o(3),x(e.citaAEliminar.hora==null?null:e.citaAEliminar.hora.substring(0,5))}}function ht(n,r){n&1&&(i(0,"div",42),a(1," \u23F3 Cargando citas... "),t())}function _t(n,r){if(n&1&&(i(0,"div",43),a(1),t()),n&2){let e=s();o(),h(" ",e.successMessage," ")}}function bt(n,r){if(n&1&&(i(0,"div",44),a(1),t()),n&2){let e=s();o(),h(" ",e.editMessage," ")}}function Ct(n,r){if(n&1&&(i(0,"div",45),a(1),t()),n&2){let e=s();o(),h(" ",e.deleteMessage," ")}}function yt(n,r){if(n&1){let e=_();i(0,"tr",60)(1,"td",61),a(2),ge(3,"date"),t(),i(4,"td",62),a(5),t(),i(6,"td",62),a(7),t(),i(8,"td",62),a(9),t(),i(10,"td",62),a(11),t(),i(12,"td",62),a(13),t(),i(14,"td",62)(15,"span",63),a(16),t()(),i(17,"td",62)(18,"div",64)(19,"button",65),u("click",function(){let l=p(e).$implicit,m=s(4);return g(m.abrirEdicion(l))}),C(),i(20,"svg",66),v(21,"path",67),t()(),V(),i(22,"button",68),u("click",function(){let l=p(e).$implicit,m=s(4);return g(m.abrirConfirmacionEliminar(l))}),C(),i(23,"svg",66),v(24,"path",69),t()()()()()}if(n&2){let e=r.$implicit;o(2),x(ue(3,8,e.fecha,"dd/MM/yy")),o(3),x(e.hora.substring(0,5)),o(2),x(e.pacienteNombreCompleto),o(2),x(e.especialidad),o(2),x(e.medicoNombreCompleto),o(2),x(e.motivo),o(2),c("ngClass",pe(11,Ge,e.estado==="PENDIENTE",e.estado==="CONFIRMADA",e.estado==="CANCELADA")),o(),h(" ",e.estado," ")}}function Et(n,r){if(n&1&&(i(0,"div",53)(1,"div",54)(2,"table",55)(3,"thead",56)(4,"tr")(5,"th",57),a(6,"Fecha"),t(),i(7,"th",57),a(8,"Hora"),t(),i(9,"th",57),a(10,"Paciente"),t(),i(11,"th",57),a(12,"Especialidad"),t(),i(13,"th",57),a(14,"M\xE9dico"),t(),i(15,"th",57),a(16,"Motivo"),t(),i(17,"th",57),a(18,"Estado"),t(),i(19,"th",57),a(20,"Acciones"),t()()(),i(21,"tbody",58),f(22,yt,25,15,"tr",59),t()()()()),n&2){let e=s(3);o(22),c("ngForOf",e.citas)}}function wt(n,r){if(n&1){let e=_();i(0,"div",72)(1,"div",73)(2,"h3",74),a(3),t(),i(4,"span",63),a(5),t()(),i(6,"p",75)(7,"b"),a(8,"Fecha:"),t(),a(9),ge(10,"date"),t(),i(11,"p",75)(12,"b"),a(13,"Hora:"),t(),a(14),t(),i(15,"p",75)(16,"b"),a(17,"Especialidad:"),t(),a(18),t(),i(19,"p",75)(20,"b"),a(21,"M\xE9dico:"),t(),a(22),t(),i(23,"p",75)(24,"b"),a(25,"Motivo:"),t(),a(26),t(),i(27,"div",76)(28,"button",65),u("click",function(){let l=p(e).$implicit,m=s(4);return g(m.abrirEdicion(l))}),C(),i(29,"svg",66),v(30,"path",67),t()(),V(),i(31,"button",68),u("click",function(){let l=p(e).$implicit,m=s(4);return g(m.abrirConfirmacionEliminar(l))}),C(),i(32,"svg",66),v(33,"path",69),t()()()()}if(n&2){let e=r.$implicit;o(3),x(e.pacienteNombreCompleto),o(),c("ngClass",pe(11,Ge,e.estado==="PENDIENTE",e.estado==="CONFIRMADA",e.estado==="CANCELADA")),o(),h(" ",e.estado," "),o(4),h(" ",ue(10,8,e.fecha,"dd/MM/yy")),o(5),h(" ",e.hora),o(4),h(" ",e.especialidad),o(4),h(" ",e.medicoNombreCompleto),o(4),h(" ",e.motivo)}}function St(n,r){if(n&1&&(i(0,"div",70),f(1,wt,34,15,"div",71),t()),n&2){let e=s(3);o(),c("ngForOf",e.citas)}}function Mt(n,r){if(n&1){let e=_();i(0,"div"),f(1,Et,23,1,"div",47)(2,St,2,1,"div",48),i(3,"div",49)(4,"button",50),u("click",function(){p(e);let l=s(2);return g(l.prevPage())}),a(5," \u2B05 Anterior "),t(),i(6,"span",51),a(7),t(),i(8,"button",52),u("click",function(){p(e);let l=s(2);return g(l.nextPage())}),a(9," Siguiente \u27A1 "),t()()()}if(n&2){let e=s(2);o(),c("ngIf",e.viewMode==="table"),o(),c("ngIf",e.viewMode==="cards"),o(2),c("disabled",e.currentPage===0),o(3),E(" P\xE1gina ",e.currentPage+1," de ",e.totalPages," "),o(),c("disabled",e.currentPage>=e.totalPages-1)}}function It(n,r){if(n&1&&f(0,Mt,10,6,"div",46),n&2){let e=s(),d=$(18);c("ngIf",e.citas.length>0)("ngIfElse",d)}}function Pt(n,r){n&1&&(i(0,"div",77)(1,"p",78),a(2,"No hay citas registradas \u{1F5D2}"),t(),i(3,"p",79),a(4,"Puedes agregar una nueva cita desde el bot\xF3n "),i(5,"b"),a(6,'"+ Nueva Cita"'),t(),a(7,"."),t()())}var ie=class n{constructor(r,e,d,l){this.citaService=r;this.cdr=e;this.pacienteService=d;this.medicoService=l}mostrarFormulario=!1;citas=[];pacientes=[];medicos=[];especialidades=[];totalPages=0;currentPage=0;size=6;loading=!1;successMessage=null;editMessage=null;deleteMessage=null;editingCita=null;citaAEliminar=null;cita={pacienteId:null,medicoId:null,fecha:"",hora:"",motivo:""};viewMode="table";ngOnInit(){this.loadCitas(),this.cargarPacientes(),this.cargarMedicos()}cargarPacientes(){this.pacienteService.getPacientes(0,1e3).subscribe(r=>{this.pacientes=r.content??[],console.log("Pacientes cargados:",this.pacientes),this.cdr.detectChanges()})}cargarMedicos(){this.medicoService.getMedicos(0,1e3).subscribe(r=>{this.medicos=r.content??[],console.log("M\xE9dicos cargados:",this.medicos),this.cdr.detectChanges()})}loadCitas(r=0){this.loading=!0,this.citaService.getCitas(r,this.size).subscribe({next:e=>{this.citas=e.content,console.log("Citas cargadas:",this.citas),this.totalPages=e.totalPages,this.currentPage=e.number,this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Error cargando citas",e),this.loading=!1,this.cdr.detectChanges()}})}prevPage(){this.currentPage>0&&this.loadCitas(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages-1&&this.loadCitas(this.currentPage+1)}toggleView(){this.viewMode=this.viewMode==="table"?"cards":"table"}abrirFormularioCita(){this.cita={pacienteId:null,medicoId:null,fecha:"",hora:"",motivo:""},this.mostrarFormulario=!0,this.editingCita=null}cerrarFormularioCita(){this.mostrarFormulario=!1}guardarCita(){let r={fecha:this.cita.fecha,hora:this.cita.hora+":00",motivo:this.cita.motivo,estado:"PENDIENTE",paciente:{id:this.cita.pacienteId},medico:{id:this.cita.medicoId}};this.citaService.crearCita(r).subscribe({next:()=>{this.successMessage="\xA1Cita registrada con \xE9xito! \u{1F389}",setTimeout(()=>this.successMessage=null,4e3),this.cerrarFormularioCita(),this.loadCitas(this.currentPage)},error:e=>{console.error("Error al crear cita:",e)}})}abrirEdicion(r){console.log("Cita a editar:",r);let e=r.hora?r.hora.substring(0,5):"",d=r.idPaciente,l=r.idMedico;console.log("PacienteId encontrado:",d),console.log("MedicoId encontrado:",l),this.editingCita=fe(xe({},r),{idPaciente:d,idMedico:l,hora:e}),console.log("EditingCita:",this.editingCita),this.mostrarFormulario=!1}guardarEdicion(){if(!this.editingCita)return;let r={fecha:this.editingCita.fecha,hora:this.editingCita.hora+":00",motivo:this.editingCita.motivo,estado:this.editingCita.estado,paciente:{id:this.editingCita.idPaciente},medico:{id:this.editingCita.idMedico}};this.citaService.actualizarCita(this.editingCita.id,r).subscribe({next:()=>{this.editMessage="\u2705 Cita actualizada con \xE9xito",setTimeout(()=>this.editMessage=null,4e3),this.editingCita=null,this.loadCitas(this.currentPage)},error:e=>{console.error("\u274C Error al actualizar cita:",e)}})}cancelarEdicion(){this.editingCita=null}abrirConfirmacionEliminar(r){this.citaAEliminar=r,this.mostrarFormulario=!1,this.editingCita=null}confirmarEliminacion(){this.citaAEliminar&&this.citaService.eliminarCita(this.citaAEliminar.id).subscribe({next:()=>{this.deleteMessage="\u{1F5D1}\uFE0F Cita eliminada correctamente",setTimeout(()=>this.deleteMessage=null,4e3),this.citaAEliminar=null,this.citas.length===1&&this.currentPage>0?this.loadCitas(this.currentPage-1):this.loadCitas(this.currentPage)},error:r=>{console.error("Error al eliminar cita:",r);let e="Error al eliminar la cita";r.status===500?e="No se puede eliminar: La cita tiene dependencias o est\xE1 siendo referenciada":r.status===404?e="La cita no existe o ya fue eliminada":r.status===403?e="No tienes permisos para eliminar esta cita":r.error?.message&&(e=`Error: ${r.error.message}`),this.deleteMessage=e,setTimeout(()=>this.deleteMessage=null,6e3),this.citaAEliminar=null}})}cancelarEliminacion(){this.citaAEliminar=null}static \u0275fac=function(e){return new(e||n)(b(te),b(N),b(H),b(R))};static \u0275cmp=y({type:n,selectors:[["app-cita-medica"]],decls:19,vars:9,consts:[["emptyTpl",""],[1,"container","mx-auto","px-6","py-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-extrabold","text-gray-800","tracking-tight"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-indigo-600","hover:bg-indigo-700","text-white","text-sm","font-medium","rounded-xl","shadow-md","transition",3,"click"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","text-sm","font-medium","rounded-xl","shadow-md","transition",3,"click"],["class","fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50",4,"ngIf"],["class","text-center text-gray-500 py-10",4,"ngIf"],["class","mb-4 p-4 bg-green-100 border border-green-300 text-green-700 rounded-lg shadow-sm",4,"ngIf"],["class","mb-4 p-4 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg shadow-sm",4,"ngIf"],["class","mb-4 p-4 bg-red-100 border border-red-300 text-red-700 rounded-lg shadow-sm",4,"ngIf"],[3,"ngIf"],[1,"fixed","inset-0","bg-gray-800","bg-opacity-50","flex","justify-center","items-center","z-50"],[1,"bg-white","p-6","rounded-lg","shadow-xl","w-96","max-h-screen","overflow-y-auto"],[1,"text-lg","font-bold","mb-4"],[3,"ngSubmit"],[1,"block","mb-2","font-medium"],["name","pacienteId","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","medicoId","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","date","name","fecha","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","time","name","hora","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","name","motivo","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","justify-end","mt-6","gap-3"],["type","button",1,"px-4","py-2","bg-gray-400","hover:bg-gray-500","text-white","rounded-lg","transition",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","transition"],[3,"value"],["name","idPaciente","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","idMedico","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["name","estado","required","",1,"w-full","mb-3","border","border-gray-300","px-3","py-2","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","PENDIENTE"],["value","CONFIRMADA"],["value","CANCELADA"],["type","submit",1,"px-4","py-2","bg-green-600","hover:bg-green-700","text-white","rounded-lg","transition"],[1,"bg-white","p-6","rounded-lg","shadow-xl","w-96"],[1,"text-lg","font-bold","mb-4","text-red-600"],[1,"text-gray-700","mb-4"],[1,"text-sm","text-red-500","mb-6"],[1,"flex","justify-end","gap-3"],["type","button",1,"px-4","py-2","bg-red-600","hover:bg-red-700","text-white","rounded-lg","transition",3,"click"],[1,"text-center","text-gray-500","py-10"],[1,"mb-4","p-4","bg-green-100","border","border-green-300","text-green-700","rounded-lg","shadow-sm"],[1,"mb-4","p-4","bg-blue-100","border","border-blue-300","text-blue-700","rounded-lg","shadow-sm"],[1,"mb-4","p-4","bg-red-100","border","border-red-300","text-red-700","rounded-lg","shadow-sm"],[4,"ngIf","ngIfElse"],["class","bg-white/70 backdrop-blur-lg rounded-2xl shadow-lg overflow-hidden border border-gray-100",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"flex","justify-between","items-center","p-4","mt-6","bg-gray-50","border","rounded-xl"],[1,"flex","items-center","gap-2","px-4","py-2","bg-gray-200","hover:bg-gray-300","rounded-xl","text-sm","font-medium","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-gray-600","font-medium"],[1,"flex","items-center","gap-2","px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-xl","text-sm","font-medium","shadow-md","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bg-white/70","backdrop-blur-lg","rounded-2xl","shadow-lg","overflow-hidden","border","border-gray-100"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-gray-700"],[1,"bg-gradient-to-r","from-blue-600","to-blue-500","text-white","uppercase","text-xs","tracking-wider"],[1,"px-6","py-3"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition"],[1,"px-6","py-4","font-medium","text-gray-900"],[1,"px-6","py-4"],[3,"ngClass"],[1,"flex","gap-2"],["title","Editar cita",1,"flex","items-center","gap-1","px-3","py-1.5","bg-yellow-100","text-yellow-700","hover:bg-yellow-200","rounded-full","shadow-sm","text-xs","font-medium","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M16.862 4.487l2.651 2.65a.75.75 0 010 1.06L9.92 17.79l-3.713.53a.75.75 0 01-.848-.848l.53-3.713 9.593-9.593a.75.75 0 011.06 0z"],["title","Eliminar cita",1,"flex","items-center","gap-1","px-3","py-1.5","bg-red-100","text-red-700","hover:bg-red-200","rounded-full","shadow-sm","text-xs","font-medium","transition",3,"click"],["fill-rule","evenodd","d","M16.5 4.5v-.75A2.25 2.25 0 0014.25 1.5h-4.5A2.25 2.25 0 007.5 3.75v.75H3.75a.75.75 0 000 1.5h16.5a.75.75 0 000-1.5H16.5zm-10.125 3l.597 12.009A2.25 2.25 0 009.218 22.5h5.564a2.25 2.25 0 002.246-2.991L17.625 7.5H6.375z","clip-rule","evenodd"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-200","p-6","hover:shadow-xl","transition"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-bold","text-gray-800"],[1,"text-sm","text-gray-600"],[1,"mt-4","flex","justify-end","gap-2"],[1,"text-center","text-gray-500","mt-10","bg-gray-100","py-10","rounded-xl","shadow-inner"],[1,"text-lg","font-medium"],[1,"text-sm"]],template:function(e,d){if(e&1){let l=_();i(0,"div",1)(1,"div",2)(2,"h2",3),a(3," \u{1F4C5} Citas M\xE9dicas "),t(),i(4,"div",4)(5,"button",5),u("click",function(){return p(l),g(d.toggleView())}),a(6),t(),i(7,"button",6),u("click",function(){return p(l),g(d.abrirFormularioCita())}),a(8," + Nueva Cita "),t()()(),f(9,gt,31,7,"div",7)(10,ft,40,8,"div",7)(11,vt,22,3,"div",7)(12,ht,2,0,"div",8)(13,_t,2,1,"div",9)(14,bt,2,1,"div",10)(15,Ct,2,1,"div",11)(16,It,1,2,"ng-template",12)(17,Pt,8,0,"ng-template",null,0,q),t()}e&2&&(o(6),h(" Cambiar a ",d.viewMode==="table"?"Cards":"Tabla"," "),o(3),c("ngIf",d.mostrarFormulario),o(),c("ngIf",d.editingCita),o(),c("ngIf",d.citaAEliminar),o(),c("ngIf",d.loading),o(),c("ngIf",d.successMessage),o(),c("ngIf",d.editMessage),o(),c("ngIf",d.deleteMessage),o(),c("ngIf",!d.loading))},dependencies:[I,we,k,A,Ue,je,Re,We,De,He,Ne,Ae,ze,Le,Oe,Se],encapsulation:2})};function Tt(n,r){n&1&&(i(0,"div",9),a(1," \u23F3 Cargando pacientes... "),t())}function Vt(n,r){if(n&1&&(i(0,"tr",24)(1,"td",25),a(2),t(),i(3,"td",25),a(4),t(),i(5,"td",26),a(6),t(),i(7,"td",26),a(8),t(),i(9,"td",26),a(10),t(),i(11,"td",26),a(12),t(),i(13,"td",26),a(14),t()()),n&2){let e=r.$implicit;o(2),x(e.nombres),o(2),x(e.apellidos),o(2),x(e.dni),o(2),x(e.fechaNacimiento),o(2),x(e.direccion),o(2),x(e.telefono),o(2),x(e.email)}}function kt(n,r){if(n&1&&(i(0,"div",17)(1,"div",18)(2,"table",19)(3,"thead",20)(4,"tr")(5,"th",21),a(6,"Nombres"),t(),i(7,"th",21),a(8,"Apellidos"),t(),i(9,"th",21),a(10,"DNI"),t(),i(11,"th",21),a(12,"Edad"),t(),i(13,"th",21),a(14,"Direcci\xF3n"),t(),i(15,"th",21),a(16,"Tel\xE9fono"),t(),i(17,"th",21),a(18,"Correo"),t()()(),i(19,"tbody",22),f(20,Vt,15,7,"tr",23),t()()()()),n&2){let e=s(3);o(20),c("ngForOf",e.pacientes)}}function Ft(n,r){if(n&1&&(i(0,"div",29)(1,"div",30)(2,"h3",31),a(3),t(),i(4,"span",32),a(5),t()(),i(6,"p",33)(7,"b"),a(8,"DNI:"),t(),a(9),t(),i(10,"p",33)(11,"b"),a(12,"Tel\xE9fono:"),t(),a(13),t(),i(14,"p",33)(15,"b"),a(16,"Email:"),t(),a(17),t(),i(18,"p",33)(19,"b"),a(20,"Direcci\xF3n:"),t(),a(21),t()()),n&2){let e=r.$implicit;o(3),x(e.nombres),o(2),h(" ",e.fechaNacimiento," a\xF1os "),o(4),h(" ",e.dni),o(4),h(" ",e.telefono),o(4),h(" ",e.email),o(4),h(" ",e.direccion)}}function Dt(n,r){if(n&1&&(i(0,"div",27),f(1,Ft,22,6,"div",28),t()),n&2){let e=s(3);o(),c("ngForOf",e.pacientes)}}function Nt(n,r){if(n&1){let e=_();i(0,"div"),f(1,kt,21,1,"div",11)(2,Dt,2,1,"div",12),i(3,"div",13)(4,"button",14),u("click",function(){p(e);let l=s(2);return g(l.prevPage())}),a(5," \u2B05 Anterior "),t(),i(6,"span",15),a(7),t(),i(8,"button",16),u("click",function(){p(e);let l=s(2);return g(l.nextPage())}),a(9," Siguiente \u27A1 "),t()()()}if(n&2){let e=s(2);o(),c("ngIf",e.viewMode==="table"),o(),c("ngIf",e.viewMode==="cards"),o(2),c("disabled",e.currentPage===0),o(3),E(" P\xE1gina ",e.currentPage+1," de ",e.totalPages," "),o(),c("disabled",e.currentPage>=e.totalPages-1)}}function At(n,r){if(n&1&&f(0,Nt,10,6,"div",10),n&2){let e=s(),d=$(12);c("ngIf",e.pacientes.length>0)("ngIfElse",d)}}function Ot(n,r){n&1&&(i(0,"div",34)(1,"p",35),a(2,"No hay pacientes registrados \u{1F5D2}\uFE0F"),t(),i(3,"p",36),a(4,"Puedes agregar un nuevo paciente desde el bot\xF3n "),i(5,"b"),a(6,"\u201C+ Nuevo Paciente\u201D"),t(),a(7,"."),t()())}var ne=class n{constructor(r,e){this.pacienteService=r;this.cdr=e}pacientes=[];totalPages=0;currentPage=0;size=10;loading=!1;viewMode="table";ngOnInit(){this.loadPacientes()}loadPacientes(r=0){this.loading=!0,this.pacienteService.getPacientes(r,this.size).subscribe({next:e=>{this.pacientes=e.content,this.totalPages=e.totalPages??0,this.currentPage=e.number??0,this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Error cargando pacientes",e),this.loading=!1}})}prevPage(){this.currentPage>0&&this.loadPacientes(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages-1&&this.loadPacientes(this.currentPage+1)}toggleView(){this.viewMode=this.viewMode==="table"?"cards":"table"}static \u0275fac=function(e){return new(e||n)(b(H),b(N))};static \u0275cmp=y({type:n,selectors:[["app-paciente"]],decls:13,vars:3,consts:[["emptyTpl",""],[1,"container","mx-auto","px-6","py-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-extrabold","text-gray-800","tracking-tight"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-indigo-600","hover:bg-indigo-700","text-white","text-sm","font-medium","rounded-xl","shadow-md","transition",3,"click"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","text-sm","font-medium","rounded-xl","shadow-md","transition"],["class","text-center text-gray-500 py-10",4,"ngIf"],[3,"ngIf"],[1,"text-center","text-gray-500","py-10"],[4,"ngIf","ngIfElse"],["class","bg-white/70 backdrop-blur-lg rounded-2xl shadow-lg overflow-hidden border border-gray-100",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"flex","justify-between","items-center","p-4","mt-6","bg-gray-50","border","rounded-xl"],[1,"flex","items-center","gap-2","px-4","py-2","bg-gray-200","hover:bg-gray-300","rounded-xl","text-sm","font-medium","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-gray-600","font-medium"],[1,"flex","items-center","gap-2","px-4","py-2","bg-green-600","hover:bg-green-700","text-white","rounded-xl","text-sm","font-medium","shadow-md","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bg-white/70","backdrop-blur-lg","rounded-2xl","shadow-lg","overflow-hidden","border","border-gray-100"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-gray-700"],[1,"bg-gradient-to-r","from-green-600","to-green-500","text-white","uppercase","text-xs","tracking-wider"],[1,"px-6","py-3"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition"],[1,"px-6","py-4","font-medium","text-gray-900"],[1,"px-6","py-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-200","p-6","hover:shadow-xl","transition"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-bold","text-gray-800"],[1,"bg-green-100","text-green-700","px-3","py-1","rounded-full","text-xs","font-semibold"],[1,"text-sm","text-gray-600"],[1,"text-center","text-gray-500","mt-10","bg-gray-100","py-10","rounded-xl","shadow-inner"],[1,"text-lg","font-medium"],[1,"text-sm"]],template:function(e,d){if(e&1){let l=_();i(0,"div",1)(1,"div",2)(2,"h2",3),a(3," \u{1F9D1}\u200D\u2695\uFE0F Pacientes "),t(),i(4,"div",4)(5,"button",5),u("click",function(){return p(l),g(d.toggleView())}),a(6),t(),i(7,"button",6),a(8," + Nuevo Paciente "),t()()(),f(9,Tt,2,0,"div",7)(10,At,1,2,"ng-template",8)(11,Ot,8,0,"ng-template",null,0,q),t()}e&2&&(o(6),h(" Cambiar a ",d.viewMode==="table"?"Cards":"Tabla"," "),o(3),c("ngIf",d.loading),o(),c("ngIf",!d.loading))},dependencies:[I,k,A],encapsulation:2})};var ae=class n{constructor(r){this.http=r}_httpClient=T(P);baseUrl=O.apiUrl;getEspecialidades(r=0,e=6){return this._httpClient.get(`${this.baseUrl}/api/especialidades?page=${r}&size=${e}`).pipe(ve(d=>d.content))}static \u0275fac=function(e){return new(e||n)(z(P))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};function jt(n,r){n&1&&(i(0,"div",9)(1,"span",10),a(2,"Cargando especialidades..."),t()())}function Ht(n,r){if(n&1&&(i(0,"tr",17)(1,"td",18),a(2),t(),i(3,"td",19),a(4),t(),i(5,"td",20),a(6),t()()),n&2){let e=r.$implicit;o(2),x(e.id),o(2),x(e.nombre),o(2),x(e.descripcion)}}function Rt(n,r){if(n&1&&(i(0,"div",11)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th",14),a(5,"ID"),t(),i(6,"th",14),a(7,"Nombre"),t(),i(8,"th",14),a(9,"Descripci\xF3n"),t()()(),i(10,"tbody",15),f(11,Ht,7,3,"tr",16),t()()()),n&2){let e=s();o(11),c("ngForOf",e.especialidades)}}function Wt(n,r){n&1&&(i(0,"div",21),a(1," No hay especialidades registradas. "),t())}function zt(n,r){if(n&1){let e=_();i(0,"div",22)(1,"button",23),u("click",function(){p(e);let l=s();return g(l.prevPage())}),a(2," Anterior "),t(),i(3,"span",24),a(4),t(),i(5,"button",23),u("click",function(){p(e);let l=s();return g(l.nextPage())}),a(6," Siguiente "),t()()}if(n&2){let e=s();o(),c("disabled",e.currentPage===0),o(3),E(" P\xE1gina ",e.currentPage+1," de ",e.totalPages," "),o(),c("disabled",e.currentPage>=e.totalPages-1)}}var re=class n{constructor(r,e){this.especialidadService=r;this.cdr=e}especialidades=[];totalPages=0;currentPage=0;size=6;loading=!1;ngOnInit(){this.loadEspecialidades()}loadEspecialidades(r=0){this.loading=!0,this.especialidadService.getEspecialidades(r,this.size).subscribe({next:e=>{this.especialidades=e,this.totalPages=e.totalPages??0,this.currentPage=e.number??0,this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Error cargando especialidades",e),this.loading=!1}})}prevPage(){this.currentPage>0&&this.loadEspecialidades(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages-1&&this.loadEspecialidades(this.currentPage+1)}static \u0275fac=function(e){return new(e||n)(b(ae),b(N))};static \u0275cmp=y({type:n,selectors:[["app-especialidad"]],decls:11,vars:4,consts:[[1,"p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-extrabold","text-gray-800","tracking-tight"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-gradient-to-r","from-green-500","to-teal-500","hover:from-green-600","hover:to-teal-600","text-white","text-sm","font-medium","rounded-xl","shadow-md","transition"],["class","text-center py-6",4,"ngIf"],["class","overflow-x-auto bg-white shadow rounded-xl",4,"ngIf"],["class","text-center py-6 text-gray-500",4,"ngIf"],["class","flex justify-between items-center mt-6",4,"ngIf"],[1,"text-center","py-6"],[1,"text-green-600","font-medium"],[1,"overflow-x-auto","bg-white","shadow","rounded-xl"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-green-500","to-teal-500","text-white"],[1,"px-6","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider"],[1,"divide-y","divide-gray-100"],["class","hover:bg-green-50",4,"ngFor","ngForOf"],[1,"hover:bg-green-50"],[1,"px-6","py-4","text-sm","text-gray-700"],[1,"px-6","py-4","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","text-sm","text-gray-600"],[1,"text-center","py-6","text-gray-500"],[1,"flex","justify-between","items-center","mt-6"],[1,"px-4","py-2","rounded-lg","bg-gradient-to-r","from-green-500","to-teal-500","text-white","hover:from-green-600","hover:to-teal-600","disabled:opacity-50",3,"click","disabled"],[1,"text-sm","text-gray-600"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),a(3," \u{1F3E5} Especialidades "),t(),i(4,"div",3)(5,"button",4),a(6," + Nueva Especialidad "),t()()(),f(7,jt,3,0,"div",5)(8,Rt,12,1,"div",6)(9,Wt,2,0,"div",7)(10,zt,7,4,"div",8),t()),e&2&&(o(7),c("ngIf",d.loading),o(),c("ngIf",!d.loading&&d.especialidades.length>0),o(),c("ngIf",!d.loading&&d.especialidades.length===0),o(),c("ngIf",d.totalPages>1))},dependencies:[I,k,A],encapsulation:2})};function Ut(n,r){n&1&&(i(0,"div",8)(1,"span",9),a(2,"Cargando m\xE9dicos..."),t()())}function Bt(n,r){if(n&1&&(i(0,"tr",16)(1,"td",17),a(2),t(),i(3,"td",18),a(4),t(),i(5,"td",19),a(6),t(),i(7,"td",19),a(8),t()()),n&2){let e=r.$implicit;o(2),x(e.apellidos),o(2),x(e.nombres),o(2),x(e.cmp),o(2),x(e.especialidad.nombre)}}function $t(n,r){if(n&1&&(i(0,"div",10)(1,"table",11)(2,"thead",12)(3,"tr")(4,"th",13),a(5,"Apellidos"),t(),i(6,"th",13),a(7,"Nombres"),t(),i(8,"th",13),a(9,"CMP"),t(),i(10,"th",13),a(11,"Especialidad"),t()()(),i(12,"tbody",14),f(13,Bt,9,4,"tr",15),t()()()),n&2){let e=s();o(13),c("ngForOf",e.medicos)}}function Zt(n,r){n&1&&(i(0,"div",20),a(1," No hay m\xE9dicos registrados. "),t())}function Gt(n,r){if(n&1){let e=_();i(0,"div",21)(1,"button",22),u("click",function(){p(e);let l=s();return g(l.prevPage())}),a(2," Anterior "),t(),i(3,"span",23),a(4),t(),i(5,"button",22),u("click",function(){p(e);let l=s();return g(l.nextPage())}),a(6," Siguiente "),t()()}if(n&2){let e=s();o(),c("disabled",e.currentPage===0),o(3),E(" P\xE1gina ",e.currentPage+1," de ",e.totalPages," "),o(),c("disabled",e.currentPage>=e.totalPages-1)}}var oe=class n{constructor(r,e){this.medicoService=r;this.cdr=e}medicos=[];totalPages=0;currentPage=0;size=10;loading=!1;ngOnInit(){this.loadMedicos()}loadMedicos(r=0){this.loading=!0,this.medicoService.getMedicos(r,this.size).subscribe({next:e=>{this.medicos=e.content,this.totalPages=e.totalPages??0,this.currentPage=e.number??0,this.loading=!1,this.cdr.detectChanges()},error:e=>{console.error("Error cargando m\xE9dicos",e),this.loading=!1}})}prevPage(){this.currentPage>0&&this.loadMedicos(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages-1&&this.loadMedicos(this.currentPage+1)}static \u0275fac=function(e){return new(e||n)(b(R),b(N))};static \u0275cmp=y({type:n,selectors:[["app-medico"]],decls:10,vars:4,consts:[[1,"p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-3xl","font-extrabold","text-red-800","tracking-tight"],[1,"px-4","py-2","bg-gradient-to-r","from-red-600","to-red-500","hover:from-red-700","hover:to-red-600","text-white","text-sm","font-medium","rounded-xl","shadow-md","transition"],["class","text-center py-6",4,"ngIf"],["class","overflow-x-auto bg-white shadow rounded-xl",4,"ngIf"],["class","text-center py-6 text-red-500",4,"ngIf"],["class","flex justify-between items-center mt-6",4,"ngIf"],[1,"text-center","py-6"],[1,"text-red-600","font-medium"],[1,"overflow-x-auto","bg-white","shadow","rounded-xl"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-red-600","to-red-500","text-white"],[1,"px-6","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider"],[1,"divide-y","divide-gray-100"],["class","hover:bg-red-50",4,"ngFor","ngForOf"],[1,"hover:bg-red-50"],[1,"px-6","py-4","text-sm","text-red-900"],[1,"px-6","py-4","text-sm","font-medium","text-red-900"],[1,"px-6","py-4","text-sm","text-red-700"],[1,"text-center","py-6","text-red-500"],[1,"flex","justify-between","items-center","mt-6"],[1,"px-4","py-2","rounded-lg","bg-gradient-to-r","from-red-600","to-red-500","text-white","hover:from-red-700","hover:to-red-600","disabled:opacity-50",3,"click","disabled"],[1,"text-sm","text-red-700"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),a(3," \u{1F468}\u200D\u2695\uFE0F M\xE9dicos "),t(),i(4,"button",3),a(5," + Nuevo M\xE9dico "),t()(),f(6,Ut,3,0,"div",4)(7,$t,14,1,"div",5)(8,Zt,2,0,"div",6)(9,Gt,7,4,"div",7),t()),e&2&&(o(6),c("ngIf",d.loading),o(),c("ngIf",!d.loading&&d.medicos.length>0),o(),c("ngIf",!d.loading&&d.medicos.length===0),o(),c("ngIf",d.totalPages>1))},dependencies:[I,k,A],encapsulation:2})};var qe=[{path:"",component:X,canActivate:[Be],children:[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:Y},{path:"citas",component:ie},{path:"pacientes",component:ne},{path:"especialidades",component:re},{path:"medicos",component:oe}]},{path:"auth",loadChildren:()=>import("./chunk-MZKKVXYK.js").then(n=>n.AUTH_ROUTES)},{path:"**",redirectTo:""}];var Je=(n,r)=>{let e=localStorage.getItem("accessToken");if(e&&!n.headers.has("Authorization")){let d=n.clone({setHeaders:{Authorization:`Bearer ${e}`}});return r(d)}return r(n)};var Ke={providers:[be(),Ee(),ke(qe),Ie(Pe([Je]))]};var le=class n{title=L("Miguel");static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,d){e&1&&v(0,"router-outlet")},dependencies:[J],encapsulation:2})};Me(le,Ke).catch(n=>console.error(n));
